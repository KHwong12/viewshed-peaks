import{lu as p,lv as f,lw as d,bw as b,lx as h,ly as P,U as g,bv as x,lz as w,lA as O,lB as $,lC as N,lD as B,lE as S,lF as U,lG as E}from"./vendor.d423bc92.js";function C(e,l,t,a){return e.name?e.styleName&&e.styleName==="Esri2DPointSymbolsStyle"?z(e,l,a):P(e,l,a).then(o=>F(o,e.name,l,t,a)):Promise.reject(new g("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function F(e,l,t,a,o){const u=e.data,y={portal:t&&t.portal||x.getDefault(),url:b(e.baseUrl),origin:"portal-item"},n=u.items.find(r=>r.name===l);if(!n){const r=`The symbol name '${l}' could not be found`;return Promise.reject(new g("symbolstyleutils:symbol-name-not-found",r,{symbolName:l}))}let m=w(O(n,a),y),i=n.thumbnail&&n.thumbnail.href;const c=n.thumbnail&&n.thumbnail.imageData;$()&&(m=N(m),i=N(i));const j={portal:t.portal,url:b(h(m)),origin:"portal-item"};return p(m,o).then(r=>{const D=a==="cimRef"?f(r.data):r.data,s=d(D,j);if(s&&B(s)){if(i){const v=w(i,y);s.thumbnail=new S({url:v})}else c&&(s.thumbnail=new S({url:`data:image/png;base64,${c}`}));e.styleUrl?s.styleOrigin=new U({portal:t.portal,styleUrl:e.styleUrl,name:l}):e.styleName&&(s.styleOrigin=new U({portal:t.portal,styleName:e.styleName,name:l}))}return s})}function z(e,l,t){const a=E.replace(/\{SymbolName\}/gi,e.name);return p(a,t).then(o=>{const u=f(o.data);return d(u,{portal:l.portal,url:b(h(a)),origin:"portal-item"})})}export{F as fetchSymbolFromStyle,C as resolveWebStyleSymbol};
