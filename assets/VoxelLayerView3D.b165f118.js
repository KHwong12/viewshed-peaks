import{by as h,bz as w,U as e,eB as p,gF as t,T as y,r as a,t as n,w as v}from"./vendor.d423bc92.js";let s=class extends h(w){constructor(){super(...arguments),this.type="voxel-3d",this._wasmLayerId=-1}initialize(){if(this.view.viewingMode!=="local")throw new e("voxel:unsupported-viewingMode","Voxel layers support local viewingMode only.",{});if(this.view._stage.renderView.renderingContext.webglVersion!=="webgl2")throw new e("voxel:unsupported-context","Voxel layers are supported in WebGL2 rendering contexts only.",{});const d=this.layer.spatialReference;if(!p(d,this.view.spatialReference))throw new e("layerview:spatial-reference-incompatible","The spatial reference of this scene layer is incompatible with the spatial reference of the view",{});const r=t.getInstance(),o=r.addLayer(this.view,this).then(i=>{this._wasmLayerId=i,this._suspendedHandle=y(this,"suspended",l=>{t.getInstance().setLayerEnabled(this.view,this,!l)})}).catch(i=>{if(r.removeLayer(this.view,this),this._wasmLayerId=-1,i===-1)throw new e("voxel:addLayer-failure","The voxel layer description was invalid.",{});if(i===-2)throw new e("voxel:addLayer-failure","The voxel layer web assembly module failed to download.",{})});this.addResolvingPromise(o)}destroy(){t.getInstance().removeLayer(this.view,this),this._suspendedHandle&&(this._suspendedHandle.remove(),this._suspendedHandle=null)}isUpdating(){return!(this._wasmLayerId<0)&&t.getInstance().isUpdating(this.view,this._wasmLayerId)}updatingFlagChanged(){this.notifyChange("updating")}};a([n()],s.prototype,"layer",void 0),a([n({readOnly:!0,aliasOf:"layer.parsedUrl.path"})],s.prototype,"baseUrl",void 0),s=a([v("esri.views.3d.layers.VoxelLayerView3D")],s);const u=s;export{u as default};
